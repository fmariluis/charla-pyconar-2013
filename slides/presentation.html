<!DOCTYPE html>
<!--
  Copyright 2010 Google Inc.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.

  Original slides: Marcin Wichary (mwichary@google.com)
  Modifications: Ernest Delgado (ernestd@google.com)
                 Alex Russell (slightlyoff@chromium.org)

  landslide modifications: Adam Zapletal (adamzap@gmail.com)
                           Nicolas Perriault (nperriault@gmail.com)
-->
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Análisis de datos con Pandas</title>
    <!-- Styles -->
    
    <link rel="stylesheet" media="print" href="file:///home/franco/.virtualenvs/pyconar/local/lib/python2.7/site-packages/landslide/themes/default/css/print.css">
    <link rel="stylesheet" media="screen, projection" href="file:///home/franco/.virtualenvs/pyconar/local/lib/python2.7/site-packages/landslide/themes/default/css/screen.css">
    
    
    <!-- /Styles -->
    <!-- Javascripts -->
    
    <script type="text/javascript" src="file:///home/franco/.virtualenvs/pyconar/local/lib/python2.7/site-packages/landslide/themes/default/js/slides.js"></script>
    
    
    <!-- /Javascripts -->
</head>
<body>
  <div id="blank"></div>
  <div class="presentation">
    <div id="current_presenter_notes">
      <div id="presenter_note"></div>
    </div>
    <div class="slides">
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Análisis de datos con Pandas</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              1/33
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Hola!</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              2/33
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h2>Franco Mariluis</h2></header>
            
            
            <section><ul>
<li>Programador en MSA (http://www.msa.com.ar)</li>
<li>Estudiante de Ciencia Política en la UBA</li>
<li>@fmariluis</li>
<li>www.github.com/fmariluis</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              3/33
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h2>Colaborador: Beto</h2></header>
            
            
            <section><p><img alt="Beto" src="file:///home/franco/projects/charla-pyconar-2013/slides/images/beto.jpg" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              4/33
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Qué es Pandas?</h1></header>
            
            
            <section><p>Pandas (http://pandas.pydata.org/) es una librería que brinda
estructuras de datos especializadas para facilitar el análisis y la
transformación de información obtenida de diversas fuentes.</p>
<ul>
<li>Es rápido (mucho código escrito en Cython)</li>
<li>Activamente desarrollado</li>
<li>Utiliza y extiende numpy</li>
<li>Production-ready: la librería <strong>de facto</strong> para el análisis de datos
  en Python</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              5/33
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Qué se puede hacer con Pandas?</h1></header>
            
            
            <section><ul>
<li>Fácil manejo de información faltante</li>
<li>Es muy sencillo manipular la forma del set de datos (agregar o quitar
  columnas, "pivotear", o mezclar con otros set de datos)</li>
<li>Muchas herramientas de IO: importa de y hacia una variedad de formatos
  (CSV, xls, HDF5, json, etc.)</li>
<li>Funciona especialmente bien en combinación con Ipython / Matplotblib
  para su uso interactivo, pero también puede usarse fácilmente en un
script o en un framework web como Django o Flask</li>
<li>Poderosas herramientas para aplicar estadística descriptiva o
  cualquier función matemática sobre un set de datos.</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              6/33
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>DataFrame</h1></header>
            
            
            <section><blockquote>
<p><em>Two-dimensional size-mutable, potentially heterogeneous tabular data
structure with labeled axes (rows and columns). Arithmetic operations
align on both row and column labels. Can be thought of as a dict-like
container for Series objects. The primary pandas data
structure.</em></p>
</blockquote></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              7/33
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Proyectos relacionados</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              8/33
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Numpy</h1></header>
            
            
            <section><p>Numpy (http://www.numpy.org/) es una de las librerías fundamentales para
la computación científica en Python. Implementa un objeto array
n-dimensional muy eficiente, además de interacciones con Fortran, C++, y
otras funcionalidades matemáticas avanzadas.</p>
<p>En suma, Numpy aporta un tipo de datos muy eficiente para almacenar y
manipular información numérica. Este tipo de datos es la base del
<em>DataFrame</em> de Pandas.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              9/33
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>R</h1></header>
            
            
            <section><p>R (http://www.r-project.org/) es un entorno (y un lenguaje de programación) orientado a la
computación estadística y a los gráficos. Es un proyecto GNU y es
ampliamente usado para el análisis de datos.</p>
<p>Uno de los tipos de datos implementados por Pandas está inspirado en el
dataframe de R.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              10/33
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Matplotlib</h1></header>
            
            
            <section><p>La librería de Python más popular para producir gráficos y
visualizaciones en 3D. Vamos a ver ejemplos de uso en la siguiente
sección.</p>
<p><img alt="Barras" src="file:///home/franco/projects/charla-pyconar-2013/slides/images/barchart_demo.png" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              11/33
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Instalación</h1></header>
            
            
            <section><pre><code>pip install numpy
pip install pandas
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              12/33
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p><img alt="Carreta" src="file:///home/franco/projects/charla-pyconar-2013/slides/images/carreta.jpg" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              13/33
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Ejemplo</h1></header>
            
            
            <section><p>Vamos a usar un csv con resultados de la elección presidencial del 2007 tomado del Portal Nacional de Datos Públicos: (http://datospublicos.gob.ar)</p>
<p><a href="http://127.0.0.1:8888/ae8cd589-9ce2-4bf4-9b63-ea3ebef3678c">Ver en un IPython Notebook</a></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              14/33
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Uso interactivo</h1></header>
            
            
            <section><pre><code>ipython notebook --pylab inline
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              15/33
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Interacción con Django: caso de estudio</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              16/33
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Una aplicación web para la liquidación de horas del personal de la construcción</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              17/33
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Las horas se importan y liquidan en Tango Gestión, se requería la exportación desde Django en un formato específico</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              18/33
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>AKA: generar una pivot table</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              19/33
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Generación de una tabla dinámica usando Pandas</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              20/33
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Tabla "normal"</h1></header>
            
            
            <section><p><img alt="Tabla plana" src="file:///home/franco/projects/charla-pyconar-2013/slides/images/tabla_plana.png" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              21/33
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Tabla dinámica (pivot table)</h1></header>
            
            
            <section><p><img alt="Tabla plana" src="file:///home/franco/projects/charla-pyconar-2013/slides/images/tabla_pivot.png" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              22/33
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>views.py</h1></header>
            
            
            <section><div class="highlight"><pre><span class="lineno"> 1</span> <span class="nd">@login_required</span>
<span class="lineno"> 2</span> <span class="nd">@never_cache</span>
<span class="lineno"> 3</span> <span class="k">def</span> <span class="nf">reporte_quincena_liquidar</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
<span class="lineno"> 4</span>     <span class="sd">&quot;&quot;&quot;</span>
<span class="lineno"> 5</span> <span class="sd">    Reporte utilizado para la liquidación directa de la quincena</span>
<span class="lineno"> 6</span> <span class="sd">    &quot;&quot;&quot;</span>
<span class="lineno"> 7</span>     <span class="n">quincena</span> <span class="o">=</span> <span class="n">Hora</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">select_related</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
<span class="lineno"> 8</span>         <span class="n">fecha__year</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
<span class="lineno"> 9</span>         <span class="n">fecha__month</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">empleado__Grupo</span><span class="o">=</span><span class="s">&#39;UOCRA&#39;</span><span class="p">,</span>
<span class="lineno">10</span>         <span class="n">quincena</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s">&#39;empleado&#39;</span><span class="p">,</span> <span class="s">&#39;-fecha&#39;</span><span class="p">)</span>
<span class="lineno">11</span> 
<span class="lineno">12</span>     <span class="n">q</span> <span class="o">=</span> <span class="n">quincena</span><span class="o">.</span><span class="n">values</span><span class="p">(</span>
<span class="lineno">13</span>         <span class="s">&#39;empleado__name&#39;</span><span class="p">,</span> <span class="s">&#39;empleado__legajo&#39;</span><span class="p">,</span>
<span class="lineno">14</span>         <span class="s">&#39;Categoria__codigo&#39;</span><span class="p">,</span> <span class="s">&#39;fecha&#39;</span><span class="p">,</span> <span class="s">&#39;tipo_de_hora__descripcion&#39;</span><span class="p">,</span>
<span class="lineno">15</span>         <span class="s">&#39;tipo_de_hora__codigo_tango&#39;</span><span class="p">,</span> <span class="s">&#39;horas_reloj&#39;</span><span class="p">,</span> <span class="s">&#39;presentismo&#39;</span><span class="p">)</span>
<span class="lineno">16</span> 
<span class="lineno">17</span>     <span class="n">df_temp</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_records</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="n">coerce_float</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="lineno">18</span> 
<span class="lineno">19</span>     <span class="n">dd</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s">&quot;</span><span class="si">%d</span><span class="s">-%m&quot;</span><span class="p">)</span>
<span class="lineno">20</span> 
<span class="lineno">21</span>     <span class="n">df_temp</span><span class="o">.</span><span class="n">fecha</span> <span class="o">=</span> <span class="n">df_temp</span><span class="o">.</span><span class="n">fecha</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">dd</span><span class="p">)</span>
<span class="lineno">22</span> 
<span class="lineno">23</span>     <span class="n">df</span> <span class="o">=</span> <span class="n">df_temp</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span>
<span class="lineno">24</span>         <span class="s">&#39;empleado__name&#39;</span><span class="p">:</span> <span class="s">&#39;nombre&#39;</span><span class="p">,</span> <span class="s">&#39;empleado__legajo&#39;</span><span class="p">:</span> <span class="s">&#39;leg&#39;</span><span class="p">,</span>
<span class="lineno">25</span>         <span class="s">&#39;Categoria__codigo&#39;</span><span class="p">:</span> <span class="s">&#39;cat&#39;</span><span class="p">,</span> <span class="s">&#39;tipo_de_hora__descripcion&#39;</span><span class="p">:</span> <span class="s">&#39;tipo_h&#39;</span><span class="p">,</span>
<span class="lineno">26</span>         <span class="s">&#39;tipo_de_hora__codigo_tango&#39;</span><span class="p">:</span> <span class="s">&#39;codigo_tango&#39;</span><span class="p">,</span> <span class="s">&#39;presentismo&#39;</span><span class="p">:</span> <span class="s">&#39;p&#39;</span><span class="p">})</span>
<span class="lineno">27</span> 
<span class="lineno">28</span>     <span class="n">pv</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s">&quot;horas_reloj&quot;</span><span class="p">,</span> <span class="n">cols</span><span class="o">=</span><span class="s">&quot;fecha&quot;</span><span class="p">,</span> <span class="n">rows</span><span class="o">=</span><span class="p">[</span>
<span class="lineno">29</span>         <span class="s">&#39;nombre&#39;</span><span class="p">,</span> <span class="s">&#39;leg&#39;</span><span class="p">,</span> <span class="s">&#39;cat&#39;</span><span class="p">,</span> <span class="s">&#39;codigo_tango&#39;</span><span class="p">,</span> <span class="s">&#39;tipo_h&#39;</span><span class="p">,</span>
<span class="lineno">30</span>         <span class="s">&#39;p&#39;</span><span class="p">],</span> <span class="n">margins</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">aggfunc</span><span class="o">=</span><span class="nb">sum</span><span class="p">)</span>
<span class="lineno">31</span> 
<span class="lineno">32</span>     <span class="n">d_tag</span> <span class="o">=</span> <span class="s">&#39;-&#39;</span> <span class="o">+</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s">&#39;-&#39;</span> <span class="o">+</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s">&#39;-&#39;</span> <span class="o">+</span> <span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="lineno">33</span> 
<span class="lineno">34</span>     <span class="n">filename</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="s">&#39;quincena&#39;</span> <span class="o">+</span> <span class="n">d_tag</span> <span class="o">+</span> <span class="s">&#39;.xls&#39;</span><span class="p">)</span>
<span class="lineno">35</span> 
<span class="lineno">36</span>     <span class="n">pv</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="s">&#39;/srv/www/hurondb.com.ar/public_html/static/reportes/&#39;</span> <span class="o">+</span> <span class="n">filename</span><span class="p">,</span>
<span class="lineno">37</span>                 <span class="n">sheet_name</span><span class="o">=</span><span class="s">&quot;quincena&quot;</span><span class="p">)</span>
<span class="lineno">38</span> 
<span class="lineno">39</span>     <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s">&#39;/static/reportes/&#39;</span> <span class="o">+</span> <span class="n">filename</span><span class="p">)</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              23/33
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Vamos por partes</h1></header>
            
            
            <section><p><img alt="Vamos por partes" src="file:///home/franco/projects/charla-pyconar-2013/slides/images/london-ripper.jpg" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              24/33
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p>Armamos el queryset</p>
<div class="highlight"><pre><span class="lineno">1</span>     <span class="n">quincena</span> <span class="o">=</span> <span class="n">Hora</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">select_related</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
<span class="lineno">2</span>         <span class="n">fecha__year</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
<span class="lineno">3</span>         <span class="n">fecha__month</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">empleado__Grupo</span><span class="o">=</span><span class="s">&#39;UOCRA&#39;</span><span class="p">,</span>
<span class="lineno">4</span>         <span class="n">quincena</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s">&#39;empleado&#39;</span><span class="p">,</span> <span class="s">&#39;-fecha&#39;</span><span class="p">)</span>
</pre></div>

<p>Traemos el resultado en forma de dict</p>
<div class="highlight"><pre><span class="lineno">1</span>     <span class="n">q</span> <span class="o">=</span> <span class="n">quincena</span><span class="o">.</span><span class="n">values</span><span class="p">(</span>
<span class="lineno">2</span>         <span class="s">&#39;empleado__name&#39;</span><span class="p">,</span> <span class="s">&#39;empleado__legajo&#39;</span><span class="p">,</span>
<span class="lineno">3</span>         <span class="s">&#39;Categoria__codigo&#39;</span><span class="p">,</span> <span class="s">&#39;fecha&#39;</span><span class="p">,</span> <span class="s">&#39;tipo_de_hora__descripcion&#39;</span><span class="p">,</span>
<span class="lineno">4</span>         <span class="s">&#39;tipo_de_hora__codigo_tango&#39;</span><span class="p">,</span> <span class="s">&#39;horas_reloj&#39;</span><span class="p">,</span> <span class="s">&#39;presentismo&#39;</span><span class="p">)</span>
</pre></div>

<p>Creamos el dataframe a partir de ese dict</p>
<div class="highlight"><pre><span class="lineno">1</span>     <span class="n">df_temp</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_records</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="n">coerce_float</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>

<p>Creamos una función anónima para formatear la fecha</p>
<div class="highlight"><pre><span class="lineno">1</span>     <span class="n">dd</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s">&quot;</span><span class="si">%d</span><span class="s">-%m&quot;</span><span class="p">)</span>
</pre></div>

<p>Aplicamos la función anónima a la columna fecha para formatearla </p>
<div class="highlight"><pre><span class="lineno">1</span>     <span class="n">df_temp</span><span class="o">.</span><span class="n">fecha</span> <span class="o">=</span> <span class="n">df_temp</span><span class="o">.</span><span class="n">fecha</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">dd</span><span class="p">)</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              25/33
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p>Renombramos las columnas del dataframe</p>
<div class="highlight"><pre><span class="lineno">1</span>     <span class="n">df</span> <span class="o">=</span> <span class="n">df_temp</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span>
<span class="lineno">2</span>         <span class="s">&#39;empleado__name&#39;</span><span class="p">:</span> <span class="s">&#39;nombre&#39;</span><span class="p">,</span> <span class="s">&#39;empleado__legajo&#39;</span><span class="p">:</span> <span class="s">&#39;leg&#39;</span><span class="p">,</span>
<span class="lineno">3</span>         <span class="s">&#39;Categoria__codigo&#39;</span><span class="p">:</span> <span class="s">&#39;cat&#39;</span><span class="p">,</span> <span class="s">&#39;tipo_de_hora__descripcion&#39;</span><span class="p">:</span> <span class="s">&#39;tipo_h&#39;</span><span class="p">,</span>
<span class="lineno">4</span>         <span class="s">&#39;tipo_de_hora__codigo_tango&#39;</span><span class="p">:</span> <span class="s">&#39;codigo_tango&#39;</span><span class="p">,</span> <span class="s">&#39;presentismo&#39;</span><span class="p">:</span> <span class="s">&#39;p&#39;</span><span class="p">})</span>
</pre></div>

<p>Generamos la pivot table</p>
<div class="highlight"><pre><span class="lineno">1</span>     <span class="n">pv</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s">&quot;horas_reloj&quot;</span><span class="p">,</span> <span class="n">cols</span><span class="o">=</span><span class="s">&quot;fecha&quot;</span><span class="p">,</span> <span class="n">rows</span><span class="o">=</span><span class="p">[</span>
<span class="lineno">2</span>         <span class="s">&#39;nombre&#39;</span><span class="p">,</span> <span class="s">&#39;leg&#39;</span><span class="p">,</span> <span class="s">&#39;cat&#39;</span><span class="p">,</span> <span class="s">&#39;codigo_tango&#39;</span><span class="p">,</span> <span class="s">&#39;tipo_h&#39;</span><span class="p">,</span>
<span class="lineno">3</span>         <span class="s">&#39;p&#39;</span><span class="p">],</span> <span class="n">margins</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">aggfunc</span><span class="o">=</span><span class="nb">sum</span><span class="p">)</span>
</pre></div>

<p>Creamos el xls</p>
<div class="highlight"><pre><span class="lineno">1</span>     <span class="n">pv</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="s">&#39;/srv/www/hurondb.com.ar/public_html/static/reportes/&#39;</span> <span class="o">+</span> <span class="n">filename</span><span class="p">,</span>
<span class="lineno">2</span>                 <span class="n">sheet_name</span><span class="o">=</span><span class="s">&quot;quincena&quot;</span><span class="p">)</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              26/33
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Más información</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              27/33
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p><img alt="Python for Data Analysis" src="file:///home/franco/projects/charla-pyconar-2013/slides/images/pandas_cover.jpg" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              28/33
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>http://pandas.pydata.org/</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              29/33
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>BTW</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              30/33
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Estamos buscando gente</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              31/33
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>rrhh@msa.com.ar</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              32/33
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Gracias!</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              33/33
            </aside>
          </footer>
        </div>
      </div>
      
    </div>
  </div>
  
  <div id="toc" class="sidebar hidden">
    <h2>Table of Contents</h2>
    <table>
      <caption>Table of Contents</caption>
      
      <tr id="toc-row-1">
        <th><a href="#slide1">Análisis de datos con Pandas</a></th>
        <td><a href="#slide1">1</a></td>
      </tr>
      
      
      <tr id="toc-row-2">
        <th><a href="#slide2">Hola!</a></th>
        <td><a href="#slide2">2</a></td>
      </tr>
      
        
        <tr id="toc-row-3" class="sub">
          <th><a href="#slide3">Franco Mariluis</a></th>
          <td><a href="#slide3">3</a></td>
        </tr>
        
        <tr id="toc-row-4" class="sub">
          <th><a href="#slide4">Colaborador: Beto</a></th>
          <td><a href="#slide4">4</a></td>
        </tr>
        
      
      
      <tr id="toc-row-5">
        <th><a href="#slide5">Qué es Pandas?</a></th>
        <td><a href="#slide5">5</a></td>
      </tr>
      
      
      <tr id="toc-row-6">
        <th><a href="#slide6">Qué se puede hacer con Pandas?</a></th>
        <td><a href="#slide6">6</a></td>
      </tr>
      
      
      <tr id="toc-row-7">
        <th><a href="#slide7">DataFrame</a></th>
        <td><a href="#slide7">7</a></td>
      </tr>
      
      
      <tr id="toc-row-8">
        <th><a href="#slide8">Proyectos relacionados</a></th>
        <td><a href="#slide8">8</a></td>
      </tr>
      
      
      <tr id="toc-row-9">
        <th><a href="#slide9">Numpy</a></th>
        <td><a href="#slide9">9</a></td>
      </tr>
      
      
      <tr id="toc-row-10">
        <th><a href="#slide10">R</a></th>
        <td><a href="#slide10">10</a></td>
      </tr>
      
      
      <tr id="toc-row-11">
        <th><a href="#slide11">Matplotlib</a></th>
        <td><a href="#slide11">11</a></td>
      </tr>
      
      
      <tr id="toc-row-12">
        <th><a href="#slide12">Instalación</a></th>
        <td><a href="#slide12">12</a></td>
      </tr>
      
      
      <tr id="toc-row-13">
        <th><a href="#slide13">-</a></th>
        <td><a href="#slide13">13</a></td>
      </tr>
      
      
      <tr id="toc-row-14">
        <th><a href="#slide14">Ejemplo</a></th>
        <td><a href="#slide14">14</a></td>
      </tr>
      
      
      <tr id="toc-row-15">
        <th><a href="#slide15">Uso interactivo</a></th>
        <td><a href="#slide15">15</a></td>
      </tr>
      
      
      <tr id="toc-row-16">
        <th><a href="#slide16">Interacción con Django: caso de estudio</a></th>
        <td><a href="#slide16">16</a></td>
      </tr>
      
      
      <tr id="toc-row-17">
        <th><a href="#slide17">Una aplicación web para la liquidación de horas del personal de la construcción</a></th>
        <td><a href="#slide17">17</a></td>
      </tr>
      
      
      <tr id="toc-row-18">
        <th><a href="#slide18">Las horas se importan y liquidan en Tango Gestión, se requería la exportación desde Django en un formato específico</a></th>
        <td><a href="#slide18">18</a></td>
      </tr>
      
      
      <tr id="toc-row-19">
        <th><a href="#slide19">AKA: generar una pivot table</a></th>
        <td><a href="#slide19">19</a></td>
      </tr>
      
      
      <tr id="toc-row-20">
        <th><a href="#slide20">Generación de una tabla dinámica usando Pandas</a></th>
        <td><a href="#slide20">20</a></td>
      </tr>
      
      
      <tr id="toc-row-21">
        <th><a href="#slide21">Tabla "normal"</a></th>
        <td><a href="#slide21">21</a></td>
      </tr>
      
      
      <tr id="toc-row-22">
        <th><a href="#slide22">Tabla dinámica (pivot table)</a></th>
        <td><a href="#slide22">22</a></td>
      </tr>
      
      
      <tr id="toc-row-23">
        <th><a href="#slide23">views.py</a></th>
        <td><a href="#slide23">23</a></td>
      </tr>
      
      
      <tr id="toc-row-24">
        <th><a href="#slide24">Vamos por partes</a></th>
        <td><a href="#slide24">24</a></td>
      </tr>
      
      
      <tr id="toc-row-25">
        <th><a href="#slide25">-</a></th>
        <td><a href="#slide25">25</a></td>
      </tr>
      
      
      <tr id="toc-row-26">
        <th><a href="#slide26">-</a></th>
        <td><a href="#slide26">26</a></td>
      </tr>
      
      
      <tr id="toc-row-27">
        <th><a href="#slide27">Más información</a></th>
        <td><a href="#slide27">27</a></td>
      </tr>
      
      
      <tr id="toc-row-28">
        <th><a href="#slide28">-</a></th>
        <td><a href="#slide28">28</a></td>
      </tr>
      
      
      <tr id="toc-row-29">
        <th><a href="#slide29">http://pandas.pydata.org/</a></th>
        <td><a href="#slide29">29</a></td>
      </tr>
      
      
      <tr id="toc-row-30">
        <th><a href="#slide30">BTW</a></th>
        <td><a href="#slide30">30</a></td>
      </tr>
      
      
      <tr id="toc-row-31">
        <th><a href="#slide31">Estamos buscando gente</a></th>
        <td><a href="#slide31">31</a></td>
      </tr>
      
      
      <tr id="toc-row-32">
        <th><a href="#slide32">rrhh@msa.com.ar</a></th>
        <td><a href="#slide32">32</a></td>
      </tr>
      
      
      <tr id="toc-row-33">
        <th><a href="#slide33">Gracias!</a></th>
        <td><a href="#slide33">33</a></td>
      </tr>
      
      
    </table>
  </div>
  
  <div id="help" class="sidebar hidden">
    <h2>Help</h2>
    <table>
      <caption>Help</caption>
      <tr>
        <th>Table of Contents</th>
        <td>t</td>
      </tr>
      <tr>
        <th>Exposé</th>
        <td>ESC</td>
      </tr>
      <tr>
        <th>Full screen slides</th>
        <td>e</td>
      </tr>
      <tr>
        <th>Presenter View</th>
        <td>p</td>
      </tr>
      <tr>
        <th>Source Files</th>
        <td>s</td>
      </tr>
      <tr>
        <th>Slide Numbers</th>
        <td>n</td>
      </tr>
      <tr>
        <th>Toggle screen blanking</th>
        <td>b</td>
      </tr>
      <tr>
        <th>Show/hide slide context</th>
        <td>c</td>
      </tr>
      <tr>
        <th>Notes</th>
        <td>2</td>
      </tr>
      <tr>
        <th>Help</th>
        <td>h</td>
      </tr>
    </table>
  </div>
  <script>main()</script>
</body>
</html>